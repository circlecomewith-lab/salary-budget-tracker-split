<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>薪资与预算统计</title>
    <!-- 引入外部资源 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    
    <!-- 引入自定义样式 -->
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gray-50 min-h-screen font-sans text-gray-800">
    <!-- 顶部导航 -->
    <header class="bg-white shadow-md sticky top-0 z-50 transition-all duration-300" id="navbar">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <i class="fa fa-money text-primary text-xl"></i>
                <h1 class="text-lg md:text-xl font-bold text-dark">薪资预算助手</h1>
            </div>
            <div class="flex items-center space-x-3">
                <button id="themeToggle" class="p-2 rounded-full hover:bg-gray-100 transition-colors">
                    <i class="fa fa-moon-o text-gray-600"></i>
                </button>
                <div>
                    <select id="monthSelect" class="bg-gray-100 border border-gray-200 rounded-lg px-2 py-1.5 text-sm input-focus">
                        <!-- 月份选项将通过JS动态生成 -->
                    </select>
                </div>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-5">
        <!-- 月度概览卡片 -->
        <section class="mb-6">
            <div class="bg-gradient-to-r from-primary to-blue-700 rounded-xl p-4 text-white shadow-lg transform hover:scale-[1.01] transition-transform">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center">
                    <div>
                        <h2 class="text-lg md:text-xl font-bold mb-1" id="currentMonthDisplay">2023年6月</h2>
                        <p class="opacity-90 text-sm">掌握你的财务状况，合理规划收支</p>
                    </div>
                    <div class="mt-3 md:mt-0 flex space-x-2">
                        <button id="prevMonth" class="bg-white/20 hover:bg-white/30 p-2 rounded-full transition-colors">
                            <i class="fa fa-chevron-left"></i>
                        </button>
                        <button id="nextMonth" class="bg-white/20 hover:bg-white/30 p-2 rounded-full transition-colors">
                            <i class="fa fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
                
                <!-- 响应式财务概览卡片 - 在手机上改为垂直堆叠 -->
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 mt-4">
                    <div class="bg-white/10 backdrop-blur-sm rounded-xl p-3 transform hover:translate-y-[-5px] transition-transform">
                        <div class="text-xs opacity-80 mb-1 flex items-center">
                            月收入
                            <span class="tooltip ml-1">
                                <i class="fa fa-info-circle text-xs"></i>
                                <span class="tooltip-text">你的月总收入金额</span>
                            </span>
                        </div>
                        <div class="flex items-baseline">
                            <span class="text-lg md:text-xl font-bold" id="monthlyIncome">¥0</span>
                            <button id="editIncome" class="ml-2 text-xs bg-white/20 hover:bg-white/30 p-1 rounded transition-colors">
                                <i class="fa fa-pencil"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="bg-white/10 backdrop-blur-sm rounded-xl p-3 transform hover:translate-y-[-5px] transition-transform">
                        <div class="text-xs opacity-80 mb-1 flex items-center">
                            可支配金额
                            <span class="tooltip ml-1">
                                <i class="fa fa-info-circle text-xs"></i>
                                <span class="tooltip-text">可用于分配的预算总金额</span>
                            </span>
                        </div>
                        <div class="flex items-baseline">
                            <span class="text-lg md:text-xl font-bold" id="disposableAmount">¥0</span>
                            <button id="editDisposable" class="ml-2 text-xs bg-white/20 hover:bg-white/30 p-1 rounded transition-colors">
                                <i class="fa fa-pencil"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="bg-white/10 backdrop-blur-sm rounded-xl p-3 transform hover:translate-y-[-5px] transition-transform">
                        <div class="text-xs opacity-80 mb-1 flex items-center">
                            总预算
                            <span class="tooltip ml-1">
                                <i class="fa fa-info-circle text-xs"></i>
                                <span class="tooltip-text">所有预算项目的总和</span>
                            </span>
                        </div>
                        <div class="text-lg md:text-xl font-bold" id="totalBudget">¥0</div>
                    </div>
                    
                    <div class="bg-white/10 backdrop-blur-sm rounded-xl p-3 transform hover:translate-y-[-5px] transition-transform">
                        <div class="text-xs opacity-80 mb-1 flex items-center">
                            剩余预算
                            <span class="tooltip ml-1">
                                <i class="fa fa-info-circle text-xs"></i>
                                <span class="tooltip-text">可支配金额 - 总预算</span>
                            </span>
                        </div>
                        <div class="text-lg md:text-xl font-bold" id="remainingBudget">¥0</div>
                    </div>
                    
                    <div class="bg-white/10 backdrop-blur-sm rounded-xl p-3 transform hover:translate-y-[-5px] transition-transform">
                        <div class="text-xs opacity-80 mb-1 flex items-center">
                            剩余金额
                            <span class="tooltip ml-1">
                                <i class="fa fa-info-circle text-xs"></i>
                                <span class="tooltip-text">月收入 - 可支配金额</span>
                            </span>
                        </div>
                        <div class="text-lg md:text-xl font-bold" id="remainingAmount">¥0</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 主要内容区 - 在手机上垂直堆叠 -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-5">
            <!-- 左侧：预算项目 -->
            <section class="lg:col-span-2">
                <div class="bg-white rounded-xl shadow-md p-4 mb-5">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-lg font-bold text-dark">预算项目</h2>
                        <button id="addBudgetItem" class="bg-primary hover:bg-primary/90 text-white px-3 py-1.5 rounded-lg transition-colors flex items-center text-sm">
                            <i class="fa fa-plus mr-1.5"></i> 添加项目
                        </button>
                    </div>
                    
                    <!-- 移动端表格支持横向滚动 -->
                    <div class="mobile-table">
                        <table class="w-full min-w-[500px]">
                            <thead>
                                <tr class="border-b border-gray-200">
                                    <th class="text-left py-2 px-3 font-semibold text-gray-600 text-sm">项目名称</th>
                                    <th class="text-left py-2 px-3 font-semibold text-gray-600 text-sm">预算金额</th>
                                    <th class="text-left py-2 px-3 font-semibold text-gray-600 text-sm">已使用</th>
                                    <th class="text-left py-2 px-3 font-semibold text-gray-600 text-sm">剩余</th>
                                    <th class="text-left py-2 px-3 font-semibold text-gray-600 text-sm">操作</th>
                                </tr>
                            </thead>
                            <tbody id="budgetItemsTable">
                                <!-- 预算项目将通过JS动态生成 -->
                                <tr class="text-center text-gray-500">
                                    <td colspan="5" class="py-6">请添加预算项目</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- 支出记录 -->
                <div class="bg-white rounded-xl shadow-md p-4">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-lg font-bold text-dark">支出记录</h2>
                        <button id="addExpense" class="bg-accent hover:bg-accent/90 text-white px-3 py-1.5 rounded-lg transition-colors flex items-center text-sm">
                            <i class="fa fa-plus mr-1.5"></i> 添加支出
                        </button>
                    </div>
                    
                    <!-- 移动端表格支持横向滚动 -->
                    <div class="mobile-table">
                        <table class="w-full min-w-[500px]">
                            <thead>
                                <tr class="border-b border-gray-200">
                                    <th class="text-left py-2 px-3 font-semibold text-gray-600 text-sm">日期</th>
                                    <th class="text-left py-2 px-3 font-semibold text-gray-600 text-sm">项目</th>
                                    <th class="text-left py-2 px-3 font-semibold text-gray-600 text-sm">金额</th>
                                    <th class="text-left py-2 px-3 font-semibold text-gray-600 text-sm">备注</th>
                                    <th class="text-left py-2 px-3 font-semibold text-gray-600 text-sm">操作</th>
                                </tr>
                            </thead>
                            <tbody id="expensesTable">
                                <!-- 支出记录将通过JS动态生成 -->
                                <tr class="text-center text-gray-500">
                                    <td colspan="5" class="py-6">暂无支出记录</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
            
            <!-- 右侧：统计图表 - 在手机上显示在下方 -->
            <section>
                <div class="bg-white rounded-xl shadow-md p-4 mb-5">
                    <h2 class="text-lg font-bold text-dark mb-4">预算分配</h2>
                    <div class="h-56">
                        <canvas id="budgetChart"></canvas>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl shadow-md p-4 mb-5">
                    <h2 class="text-lg font-bold text-dark mb-4">月度收支趋势</h2>
                    <div class="h-56">
                        <canvas id="trendChart"></canvas>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl shadow-md p-4">
                    <h2 class="text-lg font-bold text-dark mb-4">财务健康度</h2>
                    <div class="flex flex-col items-center">
                        <div class="relative w-40 h-40 mb-3">
                            <canvas id="healthChart"></canvas>
                            <div class="absolute inset-0 flex flex-col items-center justify-center">
                                <span class="text-2xl font-bold" id="healthScore">0%</span>
                                <span class="text-xs text-gray-500">健康度</span>
                            </div>
                        </div>
                        <p class="text-center text-gray-600 text-sm" id="healthDescription">请输入月收入和预算数据以获取分析</p>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer class="bg-dark text-white py-5 mt-10">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-3 md:mb-0">
                    <div class="flex items-center space-x-2">
                        <i class="fa fa-money text-primary text-lg"></i>
                        <span class="font-bold">薪资预算助手</span>
                    </div>
                    <p class="text-gray-400 text-xs mt-1">轻松管理你的月度收支</p>
                </div>
                <div class="flex space-x-4">
                    <a href="#" class="text-gray-400 hover:text-white transition-colors text-sm">
                        <i class="fa fa-question-circle"></i> 帮助
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white transition-colors text-sm">
                        <i class="fa fa-info-circle"></i> 关于
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white transition-colors text-sm">
                        <i class="fa fa-envelope"></i> 联系
                    </a>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-4 pt-4 text-center text-gray-400 text-xs">
                © 2023 薪资预算助手 - 保护你的财务健康
            </div>
        </div>
    </footer>

    <!-- 模态框：编辑月收入 -->
    <div id="incomeModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl p-5 w-full max-w-md mx-4 transform transition-all scale-95 opacity-0" id="incomeModalContent">
            <div class="flex justify-between items-center mb-3">
                <h3 class="text-lg font-bold">编辑月收入</h3>
                <button id="closeIncomeModal" class="text-gray-500 hover:text-gray-700">
                    <i class="fa fa-times text-lg"></i>
                </button>
            </div>
            <div class="mb-4">
                <label for="incomeAmount" class="block text-gray-700 mb-1.5 text-sm">收入金额 (¥)</label>
                <input type="number" id="incomeAmount" class="w-full px-3 py-2 border border-gray-300 rounded-lg input-focus" placeholder="输入你的月收入">
            </div>
            <button id="saveIncome" class="w-full bg-primary hover:bg-primary/90 text-white py-2 rounded-lg transition-colors">保存</button>
        </div>
    </div>

    <!-- 模态框：编辑可支配金额 -->
    <div id="disposableModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl p-5 w-full max-w-md mx-4 transform transition-all scale-95 opacity-0" id="disposableModalContent">
            <div class="flex justify-between items-center mb-3">
                <h3 class="text-lg font-bold">编辑可支配金额</h3>
                <button id="closeDisposableModal" class="text-gray-500 hover:text-gray-700">
                    <i class="fa fa-times text-lg"></i>
                </button>
            </div>
            <div class="mb-4">
                <label for="disposableAmountInput" class="block text-gray-700 mb-1.5 text-sm">可支配金额 (¥)</label>
                <input type="number" id="disposableAmountInput" class="w-full px-3 py-2 border border-gray-300 rounded-lg input-focus" placeholder="输入可支配金额">
            </div>
            <button id="saveDisposable" class="w-full bg-primary hover:bg-primary/90 text-white py-2 rounded-lg transition-colors">保存</button>
        </div>
    </div>

    <!-- 模态框：添加/编辑预算项目 -->
    <div id="budgetItemModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl p-5 w-full max-w-md mx-4 transform transition-all scale-95 opacity-0" id="budgetItemModalContent">
            <div class="flex justify-between items-center mb-3">
                <h3 class="text-lg font-bold" id="budgetItemModalTitle">添加预算项目</h3>
                <button id="closeBudgetItemModal" class="text-gray-500 hover:text-gray-700">
                    <i class="fa fa-times text-lg"></i>
                </button>
            </div>
            <input type="hidden" id="budgetItemId">
            <div class="mb-4">
                <label for="budgetItemName" class="block text-gray-700 mb-1.5 text-sm">项目名称</label>
                <input type="text" id="budgetItemName" class="w-full px-3 py-2 border border-gray-300 rounded-lg input-focus" placeholder="例如：房租、餐饮">
            </div>
            <div class="mb-4">
                <label for="budgetItemAmount" class="block text-gray-700 mb-1.5 text-sm">预算金额 (¥)</label>
                <input type="number" id="budgetItemAmount" class="w-full px-3 py-2 border border-gray-300 rounded-lg input-focus" placeholder="输入预算金额">
            </div>
            <button id="saveBudgetItem" class="w-full bg-primary hover:bg-primary/90 text-white py-2 rounded-lg transition-colors">保存</button>
        </div>
    </div>

    <!-- 模态框：添加/编辑支出 -->
    <div id="expenseModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl p-5 w-full max-w-md mx-4 transform transition-all scale-95 opacity-0" id="expenseModalContent">
            <div class="flex justify-between items-center mb-3">
                <h3 class="text-lg font-bold" id="expenseModalTitle">添加支出记录</h3>
                <button id="closeExpenseModal" class="text-gray-500 hover:text-gray-700">
                    <i class="fa fa-times text-lg"></i>
                </button>
            </div>
            <input type="hidden" id="expenseId">
            <div class="mb-4">
                <label for="expenseDate" class="block text-gray-700 mb-1.5 text-sm">日期</label>
                <input type="date" id="expenseDate" class="w-full px-3 py-2 border border-gray-300 rounded-lg input-focus">
            </div>
            <div class="mb-4">
                <label for="expenseItem" class="block text-gray-700 mb-1.5 text-sm">预算项目</label>
                <select id="expenseItem" class="w-full px-3 py-2 border border-gray-300 rounded-lg input-focus">
                    <option value="">请选择预算项目</option>
                    <!-- 选项将通过JS动态生成 -->
                </select>
            </div>
            <div class="mb-4">
                <label for="expenseAmount" class="block text-gray-700 mb-1.5 text-sm">金额 (¥)</label>
                <input type="number" id="expenseAmount" class="w-full px-3 py-2 border border-gray-300 rounded-lg input-focus" placeholder="输入支出金额">
            </div>
            <div class="mb-4">
                <label for="expenseNote" class="block text-gray-700 mb-1.5 text-sm">备注</label>
                <textarea id="expenseNote" class="w-full px-3 py-2 border border-gray-300 rounded-lg input-focus" rows="2" placeholder="添加备注信息"></textarea>
            </div>
            <button id="saveExpense" class="w-full bg-accent hover:bg-accent/90 text-white py-2 rounded-lg transition-colors">保存</button>
        </div>
    </div>

    <!-- 引入JavaScript脚本 -->
    <script src="app.js"></script>
</body>
</html>
    